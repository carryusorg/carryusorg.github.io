---
layout: default
permalink: firebase
---

<section class="container" style="text-align:center;">
<br>

<button type="button" class="btn btn-info" data-toggle="modal" data-target="#contactFormModal">
Questions or Comments?</button>

<button type="button" class="btn btn-success" data-toggle="modal" data-target="#interestFormModal">
I'm Interested … Tell Me More</button>

</section>



<div class="modal fade" id="contactFormModal" tabindex="-1" role="dialog" 
aria-labelledby="contactFormModalLabel" data-toggle-children="#contactForm">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title" id="contactFormModalLabel">Feedback Form</h4>
      </div>
      <div class="modal-body">

        <form id="contactForm" data-firebase-path="research/contact" class="form-horizontal">
          <div class="form-group has-warning" id="contact-email">
            <label for="input-contact-email" class="control-label col-sm-3">
            What is your email Address</label>
            <div class="col-sm-9">
              <input id="input-contact-email" type="email" name="email" class="form-control">
              <span id="input-help-contact-email" class="help-block">
              This field is required.</span>
            </div>
          </div>
          <div class="form-group" id="contact-preferred-event">
            <label for="input-contact-preferred-event" class="control-label col-sm-3">
            Do you have a question or ideas for us? We're all ears…</label>
            <div class="col-sm-9">
              <textarea id="input-contact-message"
              type="text" name="preferred-event" class="form-control"></textarea>
              <span id="input-help-contact-email" class="help-block">
              We'll be getting back to you in a couple days.</span>
            </div>
          </div>

        </form>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" onclick="submitForm('contactForm')">Send message</button>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="interestFormModal" tabindex="-1" role="dialog" 
aria-labelledby="interestFormModalLabel" data-toggle-children="#interestForm">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
        </button>
        <h3 class="modal-title" id="interestFormModalLabel">
        Yes I'm Interested!</h3>
      </div>
      <div class="modal-body">
        <form id="interestForm" data-firebase-path="research/athlete-interest" class="form-horizontal">
          <header>
          <p>
          We'll contact you when the site launches.
          </p>
          </header>
          <div class="form-group has-warning" id="interest-email">
            <label for="input-interest-email" class="control-label col-sm-3">
            Email Address : </label>
            <div class="col-sm-9">
              <input id="input-interest-email" type="email" name="email" class="form-control">
              <span id="input-help-interest-email" class="help-block">
              This field is required.</span>
            </div>
          </div>

          <div class="form-group" id="interest-private-beta">
            <label for="input-interest-private-beta" class="control-label col-sm-3">
            Private Beta</label>
            <div class="col-sm-9">
              <div class="btn-group" data-toggle="buttons">
                <label class="btn btn-primary toggle active">
                  <input type="radio" name="private-beta" value="0" autocomplete="off" checked> 
                  No Thanks
                </label>
                <label class="btn btn-primary toggle">
                  <input type="radio" name="private-beta" value="1" autocomplete="off" 
                  id="input-interest-private-beta"> 
                  Yes! Sign Me Up
                </label>
              </div>
              <span id="input-help-interest-private-beta" class="help-block">
              Would you like to participate in a pre-release program? <br>
              (You'll get extra special care as we iron out our service offerings.)</span>
            </div>
          </div>

          <fieldset id="interestFormDetails" class="collapse">
          <p>What would you want from a service like this?</p>

          <div class="form-group" id="interest-preferred-event">
            <label for="input-interest-preferred-event" class="control-label col-sm-3">
            What event would be your first fundraiser?</label>
            <div class="col-sm-9">
              <input id="input-interest-preferred-event"
              type="text" name="preferred-event" class="form-control">
            </div>
          </div>
          <div class="form-group" id="interest-preferred-event-website">
            <label for="input-interest-preferred-event-website" class="control-label col-sm-4">
            <small>Is there a website for that?</small></label>
            <div class="col-sm-8">
              <div class="input-group input-group-sm">
                <span class="input-group-addon">http://</span>
                <input id="input-interest-preferred-event-website"
                type="url" name="preferred-event-website" class="form-control">
              </div>
            </div>
          </div>
          <div class="form-group" id="interest-preferred-charity">
            <label for="input-interest-preferred-charity" class="control-label col-sm-3">
            What charity would you support?</label>
            <div class="col-sm-9">
              <input for="input-interest-preferred-charity" 
              type="text" name="preferred-charity" class="form-control">
            </div>
          </div>
          <div class="form-group" id="interest-preferred-charity-website">
            <label for="input-interest-preferred-charity-website" class="control-label col-sm-4">
            <small>Do they have a website?</small></label>
            <div class="col-sm-8">
              <div class="input-group input-group-sm">
                <span class="input-group-addon">http://</span>
                <input id="input-interest-preferred-charity-website"
                type="url" name="preferred-charity-website" class="form-control">
              </div>
            </div>
          </div>
          <div class="form-group" id="interest-preferred-charity-goal">
            <label for="input-interest-preferred-charity-goal" class="control-label col-sm-4">
            <small>How much would you like to raise for this charity?</small></label>
            <div class="col-sm-8">
              <div class="input-group input-group-sm">
                <span class="input-group-addon">$</span>
                <input id="input-interest-preferred-charity-goal"
                type="number" name="preferred-charity-goal" class="form-control">
              </div>
            </div>
          </div>
          </fieldset>
        </form>


      </div>
      <div class="modal-footer">
        <button class="btn btn-primary pull-left" type="button" data-toggle="collapse" data-target="#interestFormDetails" aria-expanded="false" aria-controls="collapseExample" onclick="hideThis()">
          Tell us more about yourself.
        </button>
        <button type="button" class="btn btn-primary" onclick="submitForm('interestForm')">
          Send
        </button>
        <button type="button" class="btn btn-default" data-dismiss="modal">
          Cancel
        </button>
      </div>
    </div>
  </div>
</div>


<script src="https://cdn.firebase.com/js/client/2.4.2/firebase.js"></script>

<script>

function submitForm(formId){

  var $form = $('#'+formId);
  var formArray = $form.serializeArray();
  var formValues = {};
  var formData = $form.data();
  console.log('formData:',formData);
  console.log('formArray:',formArray);
  event.preventDefault();
  for(input in formArray){
    console.log('parsing input:',input);
    formValues[formArray[input].name] = formArray[input].value;
  }
  sendToFirebase(formValues,formData);
};

function sendToFirebase(values,config){
  values = values || {};
  config = config || {};
  var firebasePath = config.firebasePath || "";
  var myFirebaseRef = myFirebaseRef || new Firebase("https://carryusorg.firebaseio.com/"+firebasePath);
      
  values.timestamp = Firebase.ServerValue.TIMESTAMP;
  console.log('submitting values:',values);

  Firebase.goOnline();
  myFirebaseRef.push(values, function(error){
    if(error) {
      displayMessage("there was an error")
    }else{
      displayMessage("there was success")
    }
    Firebase.goOffline();
  });

}

function displayMessage(message){
  alert(message);
}
function hideThis(){
  $(this).hide();
}
// myFirebaseRef.child("location/city").on("value", function(snapshot) {
//   alert(snapshot.val());  // Alerts "San Francisco"
// });

</script>